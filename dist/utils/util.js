'use strict';

var _wepy = require('./../npm/wepy/lib/wepy.js');

var _wepy2 = _interopRequireDefault(_wepy);

var _lodash = require('./../npm/lodash/lodash.js');

var _lodash2 = _interopRequireDefault(_lodash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var formatTime = function formatTime(date) {
  var year = date.getFullYear();
  var month = date.getMonth() + 1;
  var day = date.getDate();
  var hour = date.getHours();
  var minute = date.getMinutes();
  var second = date.getSeconds();
  return [year, month, day].map(formatNumber).join('-') + ' ' + [hour, minute, second].map(formatNumber).join(':');
};

var formatNumber = function formatNumber(n) {
  n = n.toString();
  return n[1] ? n : '0' + n;
};
/**
 * 计量单位
 */
var UNIT_OF_MEASUREMENT = '看点';
/**
 * 人民币到看点的比例
 */
var RMB_TO_KANDIAN_RATIO = 100;

var fetch = function fetch(_ref) {
  var url = _ref.url,
      data = _ref.data,
      header = _ref.header;

  return _wepy2.default.request({
    url: url,
    data: data,
    header: header,
    method: 'GET'
  });
};

var post = function post(_ref2) {
  var url = _ref2.url,
      data = _ref2.data,
      header = _ref2.header;

  return _wepy2.default.request({
    url: url,
    data: data,
    header: header,
    method: 'POST'
  });
};

var convertO2O = function convertO2O(source, condition, merge) {
  var isSaveSource = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : true;

  var dist = {};
  for (var key in source) {
    if (condition.hasOwnProperty(key)) {
      var val = source[key];
      var todo = condition[key];
      if (_lodash2.default.isString(todo)) {
        dist[todo] = val;
      }
      if (_lodash2.default.isFunction(todo)) {
        dist[key] = todo(val, source);
      }
      if (_lodash2.default.isObject(todo)) {
        for (var key2 in todo) {
          dist[key2] = todo[key2](val, source);
        }
      }
    } else {
      if (isSaveSource) dist[key] = source[key];
    }
  }
  return _lodash2.default.assign(dist, merge);
};

//prod
var urlPrefix = 'https://www.1jtec.com/fic';
//dev
// const urlPrefix = 'http://localhost:8080';
module.exports = {
  formatTime: formatTime,
  fetch: fetch,
  post: post,
  convertO2O: convertO2O,
  urlPrefix: urlPrefix,
  unit: UNIT_OF_MEASUREMENT,
  ratio: RMB_TO_KANDIAN_RATIO
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWwuanMiXSwibmFtZXMiOlsiZm9ybWF0VGltZSIsInllYXIiLCJkYXRlIiwiZ2V0RnVsbFllYXIiLCJtb250aCIsImdldE1vbnRoIiwiZGF5IiwiZ2V0RGF0ZSIsImhvdXIiLCJnZXRIb3VycyIsIm1pbnV0ZSIsImdldE1pbnV0ZXMiLCJzZWNvbmQiLCJnZXRTZWNvbmRzIiwibWFwIiwiZm9ybWF0TnVtYmVyIiwiam9pbiIsIm4iLCJ0b1N0cmluZyIsIlVOSVRfT0ZfTUVBU1VSRU1FTlQiLCJSTUJfVE9fS0FORElBTl9SQVRJTyIsImZldGNoIiwidXJsIiwiZGF0YSIsImhlYWRlciIsInJlcXVlc3QiLCJtZXRob2QiLCJwb3N0IiwiY29udmVydE8yTyIsInNvdXJjZSIsImNvbmRpdGlvbiIsIm1lcmdlIiwiaXNTYXZlU291cmNlIiwiZGlzdCIsImtleSIsImhhc093blByb3BlcnR5IiwidmFsIiwidG9kbyIsImlzU3RyaW5nIiwiaXNGdW5jdGlvbiIsImlzT2JqZWN0Iiwia2V5MiIsImFzc2lnbiIsInVybFByZWZpeCIsIm1vZHVsZSIsImV4cG9ydHMiLCJ1bml0IiwicmF0aW8iXSwibWFwcGluZ3MiOiI7O0FBQ0U7Ozs7QUFDQTs7Ozs7O0FBRUEsSUFBTUEsYUFBYSxTQUFiQSxVQUFhLE9BQVE7QUFDekIsTUFBTUMsT0FBT0MsS0FBS0MsV0FBTCxFQUFiO0FBQ0EsTUFBTUMsUUFBUUYsS0FBS0csUUFBTCxLQUFrQixDQUFoQztBQUNBLE1BQU1DLE1BQU1KLEtBQUtLLE9BQUwsRUFBWjtBQUNBLE1BQU1DLE9BQU9OLEtBQUtPLFFBQUwsRUFBYjtBQUNBLE1BQU1DLFNBQVNSLEtBQUtTLFVBQUwsRUFBZjtBQUNBLE1BQU1DLFNBQVNWLEtBQUtXLFVBQUwsRUFBZjtBQUNBLFNBQU8sQ0FBQ1osSUFBRCxFQUFPRyxLQUFQLEVBQWNFLEdBQWQsRUFBbUJRLEdBQW5CLENBQXVCQyxZQUF2QixFQUFxQ0MsSUFBckMsQ0FBMEMsR0FBMUMsSUFBaUQsR0FBakQsR0FBdUQsQ0FBQ1IsSUFBRCxFQUFPRSxNQUFQLEVBQWVFLE1BQWYsRUFBdUJFLEdBQXZCLENBQTJCQyxZQUEzQixFQUF5Q0MsSUFBekMsQ0FBOEMsR0FBOUMsQ0FBOUQ7QUFDRCxDQVJEOztBQVVBLElBQU1ELGVBQWUsU0FBZkEsWUFBZSxJQUFLO0FBQ3hCRSxNQUFJQSxFQUFFQyxRQUFGLEVBQUo7QUFDQSxTQUFPRCxFQUFFLENBQUYsSUFBT0EsQ0FBUCxHQUFXLE1BQU1BLENBQXhCO0FBQ0QsQ0FIRDtBQUlBOzs7QUFHQSxJQUFNRSxzQkFBc0IsSUFBNUI7QUFDQTs7O0FBR0EsSUFBTUMsdUJBQXVCLEdBQTdCOztBQUVBLElBQU1DLFFBQVEsU0FBUkEsS0FBUSxPQUEyQjtBQUFBLE1BQXhCQyxHQUF3QixRQUF4QkEsR0FBd0I7QUFBQSxNQUFuQkMsSUFBbUIsUUFBbkJBLElBQW1CO0FBQUEsTUFBYkMsTUFBYSxRQUFiQSxNQUFhOztBQUN2QyxTQUFPLGVBQUtDLE9BQUwsQ0FBYTtBQUNsQkgsWUFEa0I7QUFFbEJDLGNBRmtCO0FBR2xCQyxrQkFIa0I7QUFJbEJFLFlBQVE7QUFKVSxHQUFiLENBQVA7QUFNRCxDQVBEOztBQVNBLElBQU1DLE9BQU8sU0FBUEEsSUFBTyxRQUEyQjtBQUFBLE1BQXhCTCxHQUF3QixTQUF4QkEsR0FBd0I7QUFBQSxNQUFuQkMsSUFBbUIsU0FBbkJBLElBQW1CO0FBQUEsTUFBYkMsTUFBYSxTQUFiQSxNQUFhOztBQUN0QyxTQUFPLGVBQUtDLE9BQUwsQ0FBYTtBQUNsQkgsWUFEa0I7QUFFbEJDLGNBRmtCO0FBR2xCQyxrQkFIa0I7QUFJbEJFLFlBQVE7QUFKVSxHQUFiLENBQVA7QUFNRCxDQVBEOztBQVNBLElBQU1FLGFBQWEsU0FBYkEsVUFBYSxDQUFDQyxNQUFELEVBQVNDLFNBQVQsRUFBb0JDLEtBQXBCLEVBQW9EO0FBQUEsTUFBekJDLFlBQXlCLHVFQUFWLElBQVU7O0FBQ3JFLE1BQUlDLE9BQU8sRUFBWDtBQUNBLE9BQUssSUFBSUMsR0FBVCxJQUFnQkwsTUFBaEIsRUFBd0I7QUFDdEIsUUFBSUMsVUFBVUssY0FBVixDQUF5QkQsR0FBekIsQ0FBSixFQUFtQztBQUNqQyxVQUFNRSxNQUFNUCxPQUFPSyxHQUFQLENBQVo7QUFDQSxVQUFNRyxPQUFPUCxVQUFVSSxHQUFWLENBQWI7QUFDQSxVQUFJLGlCQUFFSSxRQUFGLENBQVdELElBQVgsQ0FBSixFQUFzQjtBQUNwQkosYUFBS0ksSUFBTCxJQUFhRCxHQUFiO0FBQ0Q7QUFDRCxVQUFJLGlCQUFFRyxVQUFGLENBQWFGLElBQWIsQ0FBSixFQUF3QjtBQUN0QkosYUFBS0MsR0FBTCxJQUFZRyxLQUFLRCxHQUFMLEVBQVVQLE1BQVYsQ0FBWjtBQUNEO0FBQ0QsVUFBSSxpQkFBRVcsUUFBRixDQUFXSCxJQUFYLENBQUosRUFBc0I7QUFDcEIsYUFBSyxJQUFJSSxJQUFULElBQWlCSixJQUFqQixFQUF1QjtBQUNyQkosZUFBS1EsSUFBTCxJQUFhSixLQUFLSSxJQUFMLEVBQVdMLEdBQVgsRUFBZ0JQLE1BQWhCLENBQWI7QUFDRDtBQUNGO0FBQ0YsS0FkRCxNQWNPO0FBQ0wsVUFBSUcsWUFBSixFQUNFQyxLQUFLQyxHQUFMLElBQVlMLE9BQU9LLEdBQVAsQ0FBWjtBQUNIO0FBQ0Y7QUFDRCxTQUFPLGlCQUFFUSxNQUFGLENBQVNULElBQVQsRUFBZUYsS0FBZixDQUFQO0FBQ0QsQ0F2QkQ7O0FBeUJBO0FBQ0EsSUFBTVksWUFBWSwyQkFBbEI7QUFDQTtBQUNBO0FBQ0FDLE9BQU9DLE9BQVAsR0FBaUI7QUFDZjdDLGNBQVlBLFVBREc7QUFFZnFCLFNBQU9BLEtBRlE7QUFHZk0sUUFBTUEsSUFIUztBQUlmQyxjQUFZQSxVQUpHO0FBS2ZlLGFBQVdBLFNBTEk7QUFNZkcsUUFBTTNCLG1CQU5TO0FBT2Y0QixTQUFPM0I7QUFQUSxDQUFqQiIsImZpbGUiOiJ1dGlsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXG4gIGltcG9ydCB3ZXB5IGZyb20gJ3dlcHknO1xuICBpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG4gIGNvbnN0IGZvcm1hdFRpbWUgPSBkYXRlID0+IHtcbiAgICBjb25zdCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIGNvbnN0IG1vbnRoID0gZGF0ZS5nZXRNb250aCgpICsgMTtcbiAgICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKTtcbiAgICBjb25zdCBob3VyID0gZGF0ZS5nZXRIb3VycygpO1xuICAgIGNvbnN0IG1pbnV0ZSA9IGRhdGUuZ2V0TWludXRlcygpO1xuICAgIGNvbnN0IHNlY29uZCA9IGRhdGUuZ2V0U2Vjb25kcygpO1xuICAgIHJldHVybiBbeWVhciwgbW9udGgsIGRheV0ubWFwKGZvcm1hdE51bWJlcikuam9pbignLScpICsgJyAnICsgW2hvdXIsIG1pbnV0ZSwgc2Vjb25kXS5tYXAoZm9ybWF0TnVtYmVyKS5qb2luKCc6Jyk7XG4gIH07XG5cbiAgY29uc3QgZm9ybWF0TnVtYmVyID0gbiA9PiB7XG4gICAgbiA9IG4udG9TdHJpbmcoKTtcbiAgICByZXR1cm4gblsxXSA/IG4gOiAnMCcgKyBuO1xuICB9O1xuICAvKipcbiAgICog6K6h6YeP5Y2V5L2NXG4gICAqL1xuICBjb25zdCBVTklUX09GX01FQVNVUkVNRU5UID0gJ+eci+eCuSc7XG4gIC8qKlxuICAgKiDkurrmsJHluIHliLDnnIvngrnnmoTmr5TkvotcbiAgICovXG4gIGNvbnN0IFJNQl9UT19LQU5ESUFOX1JBVElPID0gMTAwO1xuXG4gIGNvbnN0IGZldGNoID0gKHsgdXJsLCBkYXRhLCBoZWFkZXIgfSkgPT4ge1xuICAgIHJldHVybiB3ZXB5LnJlcXVlc3Qoe1xuICAgICAgdXJsLFxuICAgICAgZGF0YSxcbiAgICAgIGhlYWRlcixcbiAgICAgIG1ldGhvZDogJ0dFVCdcbiAgICB9KTtcbiAgfTtcblxuICBjb25zdCBwb3N0ID0gKHsgdXJsLCBkYXRhLCBoZWFkZXIgfSkgPT4ge1xuICAgIHJldHVybiB3ZXB5LnJlcXVlc3Qoe1xuICAgICAgdXJsLFxuICAgICAgZGF0YSxcbiAgICAgIGhlYWRlcixcbiAgICAgIG1ldGhvZDogJ1BPU1QnXG4gICAgfSk7XG4gIH07XG5cbiAgY29uc3QgY29udmVydE8yTyA9IChzb3VyY2UsIGNvbmRpdGlvbiwgbWVyZ2UsIGlzU2F2ZVNvdXJjZSA9IHRydWUpICA9PiB7XG4gICAgbGV0IGRpc3QgPSB7fVxuICAgIGZvciAobGV0IGtleSBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChjb25kaXRpb24uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBjb25zdCB2YWwgPSBzb3VyY2Vba2V5XVxuICAgICAgICBjb25zdCB0b2RvID0gY29uZGl0aW9uW2tleV1cbiAgICAgICAgaWYgKF8uaXNTdHJpbmcodG9kbykpIHtcbiAgICAgICAgICBkaXN0W3RvZG9dID0gdmFsXG4gICAgICAgIH1cbiAgICAgICAgaWYgKF8uaXNGdW5jdGlvbih0b2RvKSkge1xuICAgICAgICAgIGRpc3Rba2V5XSA9IHRvZG8odmFsLCBzb3VyY2UpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKF8uaXNPYmplY3QodG9kbykpIHtcbiAgICAgICAgICBmb3IgKGxldCBrZXkyIGluIHRvZG8pIHtcbiAgICAgICAgICAgIGRpc3Rba2V5Ml0gPSB0b2RvW2tleTJdKHZhbCwgc291cmNlKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzU2F2ZVNvdXJjZSlcbiAgICAgICAgICBkaXN0W2tleV0gPSBzb3VyY2Vba2V5XVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXy5hc3NpZ24oZGlzdCwgbWVyZ2UpO1xuICB9XG5cbiAgLy9wcm9kXG4gIGNvbnN0IHVybFByZWZpeCA9ICdodHRwczovL3d3dy4xanRlYy5jb20vZmljJztcbiAgLy9kZXZcbiAgLy8gY29uc3QgdXJsUHJlZml4ID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCc7XG4gIG1vZHVsZS5leHBvcnRzID0ge1xuICAgIGZvcm1hdFRpbWU6IGZvcm1hdFRpbWUsXG4gICAgZmV0Y2g6IGZldGNoLFxuICAgIHBvc3Q6IHBvc3QsXG4gICAgY29udmVydE8yTzogY29udmVydE8yTyxcbiAgICB1cmxQcmVmaXg6IHVybFByZWZpeCxcbiAgICB1bml0OiBVTklUX09GX01FQVNVUkVNRU5ULFxuICAgIHJhdGlvOiBSTUJfVE9fS0FORElBTl9SQVRJT1xuICB9O1xuICJdfQ==